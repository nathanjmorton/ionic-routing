(this["webpackJsonpdaily-moments"]=this["webpackJsonpdaily-moments"]||[]).push([[1],{65:function(e,t,n){e.exports=n(91)},71:function(e,t,n){var a={"./ion-action-sheet.entry.js":[95,5],"./ion-alert.entry.js":[96,6],"./ion-app_8.entry.js":[97,7],"./ion-avatar_3.entry.js":[98,17],"./ion-back-button.entry.js":[99,18],"./ion-backdrop.entry.js":[100,43],"./ion-button_2.entry.js":[101,19],"./ion-card_5.entry.js":[102,20],"./ion-checkbox.entry.js":[103,21],"./ion-chip.entry.js":[104,22],"./ion-col_3.entry.js":[105,44],"./ion-datetime_3.entry.js":[106,10],"./ion-fab_3.entry.js":[107,23],"./ion-img.entry.js":[108,45],"./ion-infinite-scroll_2.entry.js":[109,46],"./ion-input.entry.js":[110,24],"./ion-item-option_3.entry.js":[111,25],"./ion-item_8.entry.js":[112,26],"./ion-loading.entry.js":[113,27],"./ion-menu_3.entry.js":[114,28],"./ion-modal.entry.js":[115,8],"./ion-nav_2.entry.js":[116,14],"./ion-popover.entry.js":[117,9],"./ion-progress-bar.entry.js":[118,29],"./ion-radio_2.entry.js":[119,30],"./ion-range.entry.js":[120,31],"./ion-refresher_2.entry.js":[121,11],"./ion-reorder_2.entry.js":[122,16],"./ion-ripple-effect.entry.js":[123,47],"./ion-route_4.entry.js":[124,32],"./ion-searchbar.entry.js":[125,33],"./ion-segment_2.entry.js":[126,34],"./ion-select_3.entry.js":[127,35],"./ion-slide_2.entry.js":[128,48],"./ion-spinner.entry.js":[129,13],"./ion-split-pane.entry.js":[130,49],"./ion-tab-bar_2.entry.js":[131,36],"./ion-tab_2.entry.js":[132,15],"./ion-text.entry.js":[133,37],"./ion-textarea.entry.js":[134,38],"./ion-toast.entry.js":[135,39],"./ion-toggle.entry.js":[136,12],"./ion-virtual-scroll.entry.js":[137,50]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=71,e.exports=r},73:function(e,t,n){var a={"./ion-icon.entry.js":[139,57]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=73,e.exports=r},90:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var a=n(38),r=n(1),l=n.n(r),c=n(39),o=n.n(c),i=n(2),s=n(58),u=n(16),m=n(13),d=n(60),E=(n(78),n(92),n(93),d.a.initializeApp({apiKey:"AIzaSyCp0t5eFot6mgG1_u_ZZHCmAvmSNortXYQ",authDomain:"daily-moments-25049.firebaseapp.com",databaseURL:"https://daily-moments-25049-default-rtdb.firebaseio.com",projectId:"daily-moments-25049",storageBucket:"daily-moments-25049.appspot.com",messagingSenderId:"841574956051",appId:"1:841574956051:web:4c2281335553f48a9d93e6"})),p=E.auth(),f=E.firestore(),b=E.storage(),j=l.a.createContext({loggedIn:!1}),g=function(){return Object(r.useContext)(j)},y=n(15),v=n(61),h=function(e){return Object(v.a)({id:e.id},e.data())},O=function(e){return new Date(e).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"})},k=function(){var e=g().userId,t=Object(r.useState)([]),n=Object(m.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){return f.collection("users").doc(e).collection("entries").orderBy("date","desc").limit(7).onSnapshot((function(e){var t=e.docs;return c(t.map(h))}))}),[e]),l.a.createElement(i.q,null,l.a.createElement(i.i,null,l.a.createElement(i.A,null,l.a.createElement(i.z,null,"Daily Moments!"))),l.a.createElement(i.e,{className:"ion-padding"},l.a.createElement(i.o,null,a.map((function(e){return l.a.createElement(i.m,{button:!0,key:e.id,routerLink:"/my/entries/view/".concat(e.id)},e.pictureUrl&&l.a.createElement(i.y,{slot:"end"},l.a.createElement(i.k,{src:e.pictureUrl})),l.a.createElement(i.n,null,l.a.createElement("h3",null,O(e.date)),l.a.createElement("h2",null,e.title)))}))),l.a.createElement(i.g,{vertical:"bottom",horizontal:"end"},l.a.createElement(i.h,{routerLink:"/my/entries/add"},l.a.createElement(i.j,{icon:y.a})))))},x=function(){return l.a.createElement(i.q,null,l.a.createElement(i.i,null,l.a.createElement(i.A,null,l.a.createElement(i.z,null,"Settings"))),l.a.createElement(i.e,{className:"ion-padding"},l.a.createElement(i.c,{color:"medium",expand:"block",onClick:function(){return p.signOut()}},"Logout")))},w=n(6),_=n.n(w),S=n(14),I=function(){var e=g().userId,t=Object(u.g)().id,n=Object(r.useState)(),a=Object(m.a)(n,2),c=a[0],o=a[1],s=Object(u.f)();Object(r.useEffect)((function(){f.collection("users").doc(e).collection("entries").doc(t).get().then((function(e){return o(h(e))}))}),[e,t]);var d=function(){var n=Object(S.a)(_.a.mark((function n(){var a;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=f.collection("users").doc(e).collection("entries").doc(t),n.next=3,a.delete();case 3:s.goBack();case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return l.a.createElement(i.q,null,l.a.createElement(i.i,null,l.a.createElement(i.A,null,l.a.createElement(i.d,{slot:"start"},l.a.createElement(i.b,null)),l.a.createElement(i.z,null,O(null===c||void 0===c?void 0:c.date)),l.a.createElement(i.d,{slot:"end"},l.a.createElement(i.c,{onClick:d},l.a.createElement(i.j,{icon:y.q,slot:"icon-only"}))))),l.a.createElement(i.e,{className:"ion-padding"},l.a.createElement("h2",null,null===c||void 0===c?void 0:c.title),l.a.createElement("img",{src:null===c||void 0===c?void 0:c.pictureUrl,alt:null===c||void 0===c?void 0:c.title}),l.a.createElement("p",null,null===c||void 0===c?void 0:c.description)))},C=a.b.Camera,U=function(){var e=Object(S.a)(_.a.mark((function e(t,n){var a,r,l,c,o;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.ref("/users/".concat(n,"/pictures/").concat(Date.now())),e.next=3,fetch(t);case 3:return r=e.sent,e.next=6,r.blob();case 6:return l=e.sent,e.next=9,a.put(l);case 9:return c=e.sent,e.next=12,c.ref.getDownloadURL();case 12:return o=e.sent,console.log("saved pic: ",o),e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),L=function(){var e=g().userId,t=Object(u.f)(),n=Object(r.useState)(""),c=Object(m.a)(n,2),o=c[0],s=c[1],d=Object(r.useState)("/assets/placeholder.png"),E=Object(m.a)(d,2),p=E[0],b=E[1],j=Object(r.useState)(""),y=Object(m.a)(j,2),v=y[0],h=y[1],O=Object(r.useState)(""),k=Object(m.a)(O,2),x=k[0],w=k[1],I=Object(r.useRef)();Object(r.useEffect)((function(){return function(){p.startsWith("blob:")&&URL.revokeObjectURL(p)}}),[p]);var L=function(){var e=Object(S.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(i.J)("capacitor")){e.next=13;break}return e.prev=1,e.next=4,C.getPhoto({resultType:a.a.Uri});case 4:t=e.sent,b(t.webPath),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("camera error: ",e.t0);case 11:e.next=14;break;case 13:I.current.click();case 14:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var n=Object(S.a)(_.a.mark((function n(){var a,r,l;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=f.collection("users").doc(e).collection("entries"),r={date:x,title:o,pictureUrl:p,description:v},p.startsWith("/assets")){n.next=6;break}return n.next=5,U(p,e);case 5:r.pictureUrl=n.sent;case 6:return n.next=8,a.add(r);case 8:l=n.sent,console.log("saved: ",l.id),s(""),h(""),t.goBack();case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return l.a.createElement(i.q,null,l.a.createElement(i.i,null,l.a.createElement(i.A,null,l.a.createElement(i.d,{slot:"start"},l.a.createElement(i.b,null)),l.a.createElement(i.z,null,"Add Entry"))),l.a.createElement(i.e,{className:"ion-padding"},l.a.createElement(i.o,null,l.a.createElement(i.m,null,l.a.createElement(i.n,{position:"stacked"},"Date"),l.a.createElement(i.f,{value:x,onIonChange:function(e){return w(e.detail.value)}})),l.a.createElement(i.m,null,l.a.createElement(i.n,{position:"stacked"},"Title"),l.a.createElement(i.l,{value:o,onIonChange:function(e){return s(e.detail.value)}})),l.a.createElement(i.m,null,l.a.createElement(i.n,{position:"stacked"},"Picture"),l.a.createElement("input",{type:"file",accept:"image/*",hidden:!0,ref:I,onChange:function(e){var t=e.target.files.item(0),n=URL.createObjectURL(t);b(n)}}),l.a.createElement("img",{src:p,alt:"",style:{cursor:"pointer"},onClick:L}),l.a.createElement("br",null)),l.a.createElement(i.m,null,l.a.createElement(i.n,{position:"stacked"},"Description"),l.a.createElement(i.x,{value:v,onIonChange:function(e){return h(e.detail.value)}})),l.a.createElement(i.c,{expand:"block",onClick:A},"Save"))))},A=function(){return g().loggedIn?l.a.createElement(i.v,null,l.a.createElement(i.s,null,l.a.createElement(u.b,{exact:!0,path:"/my/entries"},l.a.createElement(k,null)),l.a.createElement(u.b,{exact:!0,path:"/my/entries/add"},l.a.createElement(L,null)),l.a.createElement(u.b,{exact:!0,path:"/my/entries/view/:id"},l.a.createElement(I,null)),l.a.createElement(u.b,{exact:!0,path:"/my/settings"},l.a.createElement(x,null))),l.a.createElement(i.t,{slot:"bottom"},l.a.createElement(i.u,{tab:"home",href:"/my/entries"},l.a.createElement(i.j,{icon:y.i}),l.a.createElement(i.n,null,"Home")),l.a.createElement(i.u,{tab:"settings",href:"/my/settings"},l.a.createElement(i.j,{icon:y.p}),l.a.createElement(i.n,null,"Settings")))):l.a.createElement(u.a,{to:"/login"})},D=function(){var e=g().loggedIn,t=Object(r.useState)(""),n=Object(m.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(""),s=Object(m.a)(o,2),d=s[0],E=s[1],f=Object(r.useState)({loading:!1,error:!1}),b=Object(m.a)(f,2),j=b[0],y=b[1],v=function(){var e=Object(S.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y({loading:!0,error:!1}),e.next=4,p.signInWithEmailAndPassword(a,d);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),y({loading:!1,error:!0});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return e?l.a.createElement(u.a,{to:"/my/entries"}):l.a.createElement(i.q,null,l.a.createElement(i.i,null,l.a.createElement(i.A,null,l.a.createElement(i.z,null,"Login"))),l.a.createElement(i.e,{className:"ion-padding"},l.a.createElement(i.o,null,l.a.createElement(i.m,null,l.a.createElement(i.n,{position:"stacked"},"Email"),l.a.createElement(i.l,{type:"email",value:a,onIonChange:function(e){return c(e.detail.value)}})),l.a.createElement(i.m,null,l.a.createElement(i.n,{position:"stacked"},"Password"),l.a.createElement(i.l,{type:"password",value:d,onIonChange:function(e){return E(e.detail.value)}}))),j.error&&l.a.createElement(i.w,{color:"danger"},"Invalid credentials"),l.a.createElement(i.c,{expand:"block",onClick:v},"Login"),l.a.createElement(i.c,{expand:"block",fill:"clear",routerLink:"/register"},"Register"),l.a.createElement(i.p,{isOpen:j.loading})))},N=function(){return l.a.createElement(i.q,null,l.a.createElement(i.e,null,"Page Not Found"))},P=function(){var e=g().loggedIn,t=Object(r.useState)(""),n=Object(m.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(""),s=Object(m.a)(o,2),d=s[0],E=s[1],f=Object(r.useState)({loading:!1,error:!1}),b=Object(m.a)(f,2),j=b[0],y=b[1],v=function(){var e=Object(S.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y({loading:!0,error:!1}),e.next=4,p.createUserWithEmailAndPassword(a,d);case 4:t=e.sent,console.log("credential:",t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),y({loading:!1,error:!0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return e?l.a.createElement(u.a,{to:"/my/entries"}):l.a.createElement(i.q,null,l.a.createElement(i.i,null,l.a.createElement(i.A,null,l.a.createElement(i.z,null,"Register"))),l.a.createElement(i.e,{className:"ion-padding"},l.a.createElement(i.o,null,l.a.createElement(i.m,null,l.a.createElement(i.n,{position:"stacked"},"Email"),l.a.createElement(i.l,{type:"email",value:a,onIonChange:function(e){return c(e.detail.value)}})),l.a.createElement(i.m,null,l.a.createElement(i.n,{position:"stacked"},"Password"),l.a.createElement(i.l,{type:"password",value:d,onIonChange:function(e){return E(e.detail.value)}}))),j.error&&l.a.createElement(i.w,{color:"danger"},"Registration failed"),l.a.createElement(i.c,{expand:"block",onClick:v},"Create Account"),l.a.createElement(i.c,{expand:"block",fill:"clear",routerLink:"/login"},"Login"),l.a.createElement(i.p,{isOpen:j.loading})))},R=function(){var e=function(){var e=Object(r.useState)({loading:!0}),t=Object(m.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){return p.onAuthStateChanged((function(e){var t=e?{loggedIn:!0,userId:e.uid}:{loggedIn:!1};a({loading:!1,auth:t})}))}),[]),n}(),t=e.loading,n=e.auth;return t?l.a.createElement(i.p,{isOpen:!0}):(console.log("rendering App with auth:",n),l.a.createElement(i.a,null,l.a.createElement(j.Provider,{value:n},l.a.createElement(s.a,null,l.a.createElement(u.d,null,l.a.createElement(u.b,{exact:!0,path:"/login"},l.a.createElement(D,null)),l.a.createElement(u.b,{exact:!0,path:"/register"},l.a.createElement(P,null)),l.a.createElement(u.b,{path:"/my"},l.a.createElement(A,null)),l.a.createElement(u.a,{exact:!0,path:"/",to:"/my/entries"}),l.a.createElement(u.b,null,l.a.createElement(N,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(80),n(81),n(82),n(83),n(84),n(85),n(86),n(87),n(88),n(89),n(90);var z=a.b.SplashScreen;o.a.render(l.a.createElement(R,null),document.getElementById("root")),z.hide(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[65,3,4]]]);
//# sourceMappingURL=main.11b6d5be.chunk.js.map